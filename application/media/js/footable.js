(function(f,l,u){function r(){var b=this;b.id=null;b.busy=!1;b.start=function(f,h){b.busy||(b.stop(),b.id=setTimeout(function(){f();b.id=null;b.busy=!1},h),b.busy=!0)};b.stop=function(){null!==b.id&&(clearTimeout(b.id),b.id=null,b.busy=!1)}}function t(b,g,h){var a=this;a.id=h;a.table=b;a.options=g;a.breakpoints=[];a.breakpointNames="";a.columns={};a.plugins=l.footable.plugins.load(a);var m=a.options,d=m.classes,p=m.events,k=m.triggers,q=0;a.timers={resize:new r,register:function(c){a.timers[c]=new r; return a.timers[c]}};a.init=function(){var c=f(l),e=f(a.table);l.footable.plugins.init(a);if(e.hasClass(d.loaded))a.raise(p.alreadyInitialized);else{a.raise(p.initializing);e.addClass(d.loading);e.find(m.columnDataSelector).each(function(){var c=a.getColumnData(this);a.columns[c.index]=c});for(var b in m.breakpoints)a.breakpoints.push({name:b,width:m.breakpoints[b]}),a.breakpointNames+=b+" ";a.breakpoints.sort(function(a,c){return a.width-c.width});e.unbind(k.initialize).bind(k.initialize,function(){e.removeData("footable_info"); e.data("breakpoint","");e.trigger(k.resize);e.removeClass(d.loading);e.addClass(d.loaded).addClass(d.main);a.raise(p.initialized)}).unbind(k.redraw).bind(k.redraw,function(){a.redraw()}).unbind(k.resize).bind(k.resize,function(){a.resize()}).unbind(k.expandFirstRow).bind(k.expandFirstRow,function(){e.find(m.toggleSelector).first().not("."+d.detailShow).trigger(k.toggleRow)}).unbind(k.expandAll).bind(k.expandAll,function(){e.find(m.toggleSelector).not("."+d.detailShow).trigger(k.toggleRow)}).unbind(k.collapseAll).bind(k.collapseAll, function(){e.find("."+d.detailShow).trigger(k.toggleRow)});e.trigger(k.initialize);c.bind("resize.footable",function(){a.timers.resize.stop();a.timers.resize.start(function(){a.raise(k.resize)},m.delay)})}};a.addRowToggle=function(){if(m.addRowToggle){var c=f(a.table);c.find("span."+d.toggle).remove();for(var e in a.columns){var b=a.columns[e];if(b.toggle){e="> tbody > tr:not(."+d.detail+",."+d.disabled+") > td:nth-child("+(parseInt(b.index,10)+1)+")";c.find(e).not("."+d.detailCell).prepend(f(m.toggleHTMLElement).addClass(d.toggle)); return}}c.find("> tbody > tr:not(."+d.detail+",."+d.disabled+") > td:first-child").not("."+d.detailCell).prepend(f(m.toggleHTMLElement).addClass(d.toggle))}};a.setColumnClasses=function(){$table=f(a.table);for(var c in a.columns){var e=a.columns[c];if(null!==e.className){var b="",n=!0;f.each(e.matches,function(a,c){n||(b+=", ");b+="> tbody > tr:not(."+d.detail+") > td:nth-child("+(parseInt(c,10)+1)+")";n=!1});$table.find(b).not("."+d.detailCell).addClass(e.className)}}};a.bindToggleSelectors=function(){var c= f(a.table);a.hasAnyBreakpointColumn()&&(c.find(m.toggleSelector).unbind(k.toggleRow).bind(k.toggleRow,function(c){c=f(this).is("tr")?f(this):f(this).parents("tr:first");a.toggleDetail(c)}),c.find(m.toggleSelector).unbind("click.footable").bind("click.footable",function(a){c.is(".breakpoint")&&f(a.target).is("td,."+d.toggle)&&f(this).trigger(k.toggleRow)}))};a.parse=function(a,e){return(m.parsers[e.type]||m.parsers.alpha)(a)};a.getColumnData=function(c){var e=f(c),b=e.data("hide"),n=e.index(),b=jQuery.map((b|| "").split(","),function(a){return jQuery.trim(a)}),n={index:n,hide:{},type:e.data("type")||"alpha",name:e.data("name")||f.trim(e.text()),ignore:e.data("ignore")||!1,toggle:e.data("toggle")||!1,className:e.data("class")||null,matches:[],names:{},group:e.data("group")||null,groupName:null};if(null!==n.group){var d=f(a.table).find('> thead > tr.footable-group-row > th[data-group="'+n.group+'"], > thead > tr.footable-group-row > td[data-group="'+n.group+'"]').first();n.groupName=a.parse(d,{type:"alpha"})}d= parseInt(e.prev().attr("colspan")||0,10);q+=1<d?d-1:0;var d=parseInt(e.attr("colspan")||0,10),g=n.index+q;if(1<d)for(var h=e.data("names"),h=(h||"").split(","),k=0;k<d;k++)n.matches.push(k+g),k<h.length&&(n.names[k+g]=h[k]);else n.matches.push(g);n.hide["default"]="all"===e.data("hide")||0<=f.inArray("default",b);var d=!1,l;for(l in m.breakpoints)n.hide[l]="all"===e.data("hide")||0<=f.inArray(l,b),d=d||n.hide[l];n.hasBreakpoint=d;return a.raise(p.columnData,{column:{data:n,th:c}}).column.data};a.getViewportWidth= function(){return window.innerWidth||(document.body?document.body.offsetWidth:0)};a.calculateWidth=function(a,e){if(jQuery.isFunction(m.calculateWidthOverride))return m.calculateWidthOverride(a,e);e.viewportWidth<e.width&&(e.width=e.viewportWidth);e.parentWidth<e.width&&(e.width=e.parentWidth);return e};a.hasBreakpointColumn=function(c){for(var e in a.columns)if(a.columns[e].hide[c]&&!a.columns[e].ignore)return!0;return!1};a.hasAnyBreakpointColumn=function(){for(var c in a.columns)if(a.columns[c].hasBreakpoint)return!0; return!1};a.resize=function(){var c=f(a.table);if(c.is(":visible")&&a.hasAnyBreakpointColumn()){var e={width:c.width(),viewportWidth:a.getViewportWidth(),parentWidth:c.parent().width()},e=a.calculateWidth(c,e),b=c.data("footable_info");c.data("footable_info",e);a.raise(p.resizing,{old:b,info:e});if(!b||b&&b.width&&b.width!==e.width){for(var d=null,g,h=0;h<a.breakpoints.length;h++)if((g=a.breakpoints[h])&&g.width&&e.width<=g.width){d=g;break}d=null===d?"default":d.name;g=a.hasBreakpointColumn(d);h= c.data("breakpoint");c.data("breakpoint",d).removeClass("default breakpoint").removeClass(a.breakpointNames).addClass(d+(g?" breakpoint":""));d!==h&&(c.trigger(k.redraw),a.raise(p.breakpoint,{breakpoint:d,info:e}))}a.raise(p.resized,{old:b,info:e})}};a.redraw=function(){a.addRowToggle();a.bindToggleSelectors();a.setColumnClasses();var c=f(a.table),b=c.data("breakpoint"),g=a.hasBreakpointColumn(b);c.find("> tbody > tr:not(."+d.detail+")").data("detail_created",!1).end().find("> thead > tr:last-child > th").each(function(){var g= a.columns[f(this).index()],h="",m=!0;f.each(g.matches,function(a,c){m||(h+=", ");var b=c+1;h+="> tbody > tr:not(."+d.detail+") > td:nth-child("+b+")";h+=", > tfoot > tr:not(."+d.detail+") > td:nth-child("+b+")";h+=", > colgroup > col:nth-child("+b+")";m=!1});var h=h+(', > thead > tr[data-group-row="true"] > th[data-group="'+g.group+'"]'),k=c.find(h).add(this);!1===g.hide[b]?k.show():k.hide();if(1===c.find("> thead > tr.footable-group-row").length){var k=c.find('> thead > tr:last-child > th[data-group="'+ g.group+'"]:visible, > thead > tr:last-child > th[data-group="'+g.group+'"]:visible'),g=c.find('> thead > tr.footable-group-row > th[data-group="'+g.group+'"], > thead > tr.footable-group-row > td[data-group="'+g.group+'"]'),l=0;f.each(k,function(){l+=parseInt(f(this).attr("colspan")||1,10)});0<l?g.attr("colspan",l).show():g.hide()}}).end().find("> tbody > tr."+d.detailShow).each(function(){a.createOrUpdateDetailRow(this)});c.find("> tbody > tr."+d.detailShow+":visible").each(function(){var a=f(this).next(); a.hasClass(d.detail)&&(g?a.show():a.hide())});c.find("> thead > tr > th.footable-last-column, > tbody > tr > td.footable-last-column").removeClass("footable-last-column");c.find("> thead > tr > th.footable-first-column, > tbody > tr > td.footable-first-column").removeClass("footable-first-column");c.find("> thead > tr, > tbody > tr").find("> th:visible:last, > td:visible:last").addClass("footable-last-column").end().find("> th:visible:first, > td:visible:first").addClass("footable-first-column"); a.raise(p.redrawn)};a.toggleDetail=function(c){c=c.jquery?c:f(c);var b=c.next();c.hasClass(d.detailShow)?(c.removeClass(d.detailShow),b.hasClass(d.detail)&&b.hide(),a.raise(p.rowCollapsed,{row:c[0]})):(a.createOrUpdateDetailRow(c[0]),c.addClass(d.detailShow).next().show(),a.raise(p.rowExpanded,{row:c[0]}))};a.removeRow=function(c){c=c.jquery?c:f(c);c.hasClass(d.detail)&&(c=c.prev());var b=c.next();!0===c.data("detail_created")&&b.remove();c.remove();a.raise(p.rowRemoved)};a.appendRow=function(c){c= c.jquery?c:f(c);f(a.table).find("tbody").append(c);a.redraw()};a.getColumnFromTdIndex=function(c){var b=null,d;for(d in a.columns)if(0<=f.inArray(c,a.columns[d].matches)){b=a.columns[d];break}return b};a.createOrUpdateDetailRow=function(b){b=f(b);var e=b.next(),g,h=[];if(!0===b.data("detail_created"))return!0;if(b.is(":hidden"))return!1;a.raise(p.rowDetailUpdating,{row:b,detail:e});b.find("> td:hidden").each(function(){var b=f(this).index(),c=a.getColumnFromTdIndex(b),d=c.name;if(!0===c.ignore)return!0; b in c.names&&(d=c.names[b]);h.push({name:d,value:a.parse(this,c),display:f.trim(f(this).html()),group:c.group,groupName:c.groupName});return!0});if(0===h.length)return!1;g=b.find("> td:visible").length;var k=e.hasClass(d.detail);k||(e=f('<tr class="'+d.detail+'"><td class="'+d.detailCell+'"><div class="'+d.detailInner+'"></div></td></tr>'),b.after(e));e.find("> td:first").attr("colspan",g);g=e.find("."+d.detailInner).empty();m.createDetail(g,h,m.createGroupedDetail,m.detailSeparator,d);b.data("detail_created", !0);a.raise(p.rowDetailUpdated,{row:b,detail:e});return!k};a.raise=function(b,d){!0===a.options.debug&&f.isFunction(a.options.log)&&a.options.log(b,"event");d=d||{};var g={ft:a};f.extend(!0,g,d);var h=f.Event(b,g);h.ft||f.extend(!0,h,g);f(a.table).trigger(h);return h};a.reset=function(){var b=f(a.table);b.removeData("footable_info").data("breakpoint","").removeClass(d.loading).removeClass(d.loaded);b.find(m.toggleSelector).unbind(k.toggleRow).unbind("click.footable");b.find("> tbody > tr").removeClass(d.detailShow); b.find("> tbody > tr."+d.detail).remove();a.raise(p.reset)};a.init();return a}l.footable={options:{delay:100,breakpoints:{phone:480,tablet:1024},parsers:{alpha:function(b){return f(b).data("value")||f.trim(f(b).text())},numeric:function(b){b=f(b).data("value")||f(b).text().replace(/[^0-9.\-]/g,"");b=parseFloat(b);isNaN(b)&&(b=0);return b}},addRowToggle:!0,calculateWidthOverride:null,toggleSelector:" > tbody > tr:not(.footable-row-detail)",columnDataSelector:"> thead > tr:last-child > th, > thead > tr:last-child > td", detailSeparator:":",toggleHTMLElement:"<span />",createGroupedDetail:function(b){for(var g={_none:{name:null,data:[]}},h=0;h<b.length;h++){var a=b[h].group;null!==a?(a in g||(g[a]={name:b[h].groupName||b[h].group,data:[]}),g[a].data.push(b[h])):g._none.data.push(b[h])}return g},createDetail:function(b,g,h,a,f){g=h(g);for(var d in g)if(0!==g[d].data.length)for("_none"!==d&&b.append('<div class="'+f.detailInnerGroup+'">'+g[d].name+"</div>"),h=0;h<g[d].data.length;h++)b.append('<div class="'+f.detailInnerRow+ '"><div class="'+f.detailInnerName+'">'+g[d].data[h].name+(g[d].data[h].name?a:"")+'</div><div class="'+f.detailInnerValue+'">'+g[d].data[h].display+"</div></div>")},classes:{main:"footable",loading:"footable-loading",loaded:"footable-loaded",toggle:"footable-toggle",disabled:"footable-disabled",detail:"footable-row-detail",detailCell:"footable-row-detail-cell",detailInner:"footable-row-detail-inner",detailInnerRow:"footable-row-detail-row",detailInnerGroup:"footable-row-detail-group",detailInnerName:"footable-row-detail-name", detailInnerValue:"footable-row-detail-value",detailShow:"footable-detail-show"},triggers:{initialize:"footable_initialize",resize:"footable_resize",redraw:"footable_redraw",toggleRow:"footable_toggle_row",expandFirstRow:"footable_expand_first_row",expandAll:"footable_expand_all",collapseAll:"footable_collapse_all"},events:{alreadyInitialized:"footable_already_initialized",initializing:"footable_initializing",initialized:"footable_initialized",resizing:"footable_resizing",resized:"footable_resized", redrawn:"footable_redrawn",breakpoint:"footable_breakpoint",columnData:"footable_column_data",rowDetailUpdating:"footable_row_detail_updating",rowDetailUpdated:"footable_row_detail_updated",rowCollapsed:"footable_row_collapsed",rowExpanded:"footable_row_expanded",rowRemoved:"footable_row_removed",reset:"footable_reset"},debug:!1,log:null},version:{major:0,minor:5,toString:function(){return l.footable.version.major+"."+l.footable.version.minor},parse:function(b){version=/(\d+)\.?(\d+)?\.?(\d+)?/.exec(b); return{major:parseInt(version[1],10)||0,minor:parseInt(version[2],10)||0,patch:parseInt(version[3],10)||0}}},plugins:{_validate:function(b){if(!f.isFunction(b))return!0===l.footable.options.debug&&console.error('Validation failed, expected type "function", received type "{0}".',typeof b),!1;b=new b;if("string"!==typeof b.name)return!0===l.footable.options.debug&&console.error('Validation failed, plugin does not implement a string property called "name".',b),!1;if(!f.isFunction(b.init))return!0=== l.footable.options.debug&&console.error('Validation failed, plugin "'+b.name+'" does not implement a function called "init".',b),!1;!0===l.footable.options.debug&&console.log('Validation succeeded for plugin "'+b.name+'".',b);return!0},registered:[],register:function(b,g){l.footable.plugins._validate(b)&&(l.footable.plugins.registered.push(b),"object"===typeof g&&f.extend(!0,l.footable.options,g))},load:function(b){var g=[],f,a;for(a=0;a<l.footable.plugins.registered.length;a++)try{f=l.footable.plugins.registered[a], g.push(new f(b))}catch(m){!0===l.footable.options.debug&&console.error(m)}return g},init:function(b){for(var f=0;f<b.plugins.length;f++)try{b.plugins[f].init(b)}catch(h){!0===l.footable.options.debug&&console.error(h)}}}};var s=0;f.fn.footable=function(b){b=b||{};var g=f.extend(!0,{},l.footable.options,b);return this.each(function(){s++;var b=new t(this,g,s);f(this).data("footable",b)})}})(jQuery,window);