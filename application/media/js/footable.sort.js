(function(h,l,n){if(l.footable===n||null===l.footable)throw Error("Please check and make sure footable.js is included in the page and is loaded prior to this script.");l.footable.plugins.register(function(){var d=this;d.name="Footable Sortable";d.init=function(c){d.footable=c;!0===c.options.sort&&h(c.table).unbind(".sorting").bind({"footable_initialized.sorting":function(a){a=h(c.table);a.find("> tbody");var b=c.options.classes.sort,f,e;if(!1!==a.data("sort")){a.find("> thead > tr:last-child > th, > thead > tr:last-child > td").each(function(a){e= h(this);f=c.columns[e.index()];!0===f.sort.ignore||e.hasClass(b.sortable)||(e.addClass(b.sortable),h("<span />").addClass(b.indicator).appendTo(e))});a.find("> thead > tr:last-child > th."+b.sortable+", > thead > tr:last-child > td."+b.sortable).unbind("click.footable").bind("click.footable",function(a){a.preventDefault();e=h(this);a=!e.hasClass(b.sorted);d.doSort(e.index(),a);return!1});for(var g in c.columns)if(f=c.columns[g],f.sort.initial){d.doSort(f.index,"descending"!==f.sort.initial);break}}}, "footable_redrawn.sorting":function(a){a=h(c.table);var b=c.options.classes.sort;0<=a.data("sorted")&&a.find("> thead > tr:last-child > th").each(function(a){var c=h(this);(c.hasClass(b.sorted)||c.hasClass(b.descending))&&d.doSort(a)})},"footable_column_data.sorting":function(a){var b=h(a.column.th);a.column.data.sort=a.column.data.sort||{};a.column.data.sort.initial=b.data("sort-initial")||!1;a.column.data.sort.ignore=b.data("sort-ignore")||!1;a.column.data.sort.selector=b.data("sort-selector")|| null;b=b.data("sort-match")||0;b>=a.column.data.matches.length&&(b=0);a.column.data.sort.match=a.column.data.matches[b]}}).data("footable-sort",d)};d.doSort=function(c,a){var b=d.footable;if(!1!==h(b.table).data("sort")){var f=h(b.table),e=f.find("> tbody"),g=b.columns[c],m=f.find("> thead > tr:last-child > th:eq("+c+")"),k=b.options.classes.sort,l=b.options.events.sort;a=a===n?m.hasClass(k.sorted):"toggle"===a?!m.hasClass(k.sorted):a;if(!0===g.sort.ignore)return!0;var p=b.raise(l.sorting,{column:g, direction:a?"ASC":"DESC"});p&&!1===p.result||(f.data("sorted",g.index),f.find("> thead > tr:last-child > th, > thead > tr:last-child > td").not(m).removeClass(k.sorted+" "+k.descending),a===n&&(a=m.hasClass(k.sorted)),a?m.removeClass(k.descending).addClass(k.sorted):m.removeClass(k.sorted).addClass(k.descending),d.sort(b,e,g,a),b.bindToggleSelectors(),b.raise(l.sorted,{column:g,direction:a?"ASC":"DESC"}))}};d.rows=function(c,a,b){var d=[];a.find("> tr").each(function(){var a=h(this),g=null;if(a.hasClass(c.options.classes.detail))return!0; a.next().hasClass(c.options.classes.detail)&&(g=a.next().get(0));a={row:a,detail:g};b!==n&&(a.value=c.parse(this.cells[b.sort.match],b));d.push(a);return!0}).detach();return d};d.sort=function(c,a,b,f){var e=d.rows(c,a,b),g=c.options.sorters[b.type]||c.options.sorters.alpha;e.sort(function(a,b){return f?g(a.value,b.value):g(b.value,a.value)});for(c=0;c<e.length;c++)a.append(e[c].row),null!==e[c].detail&&a.append(e[c].detail)}},{sort:!0,sorters:{alpha:function(d,c){var a=d.toLowerCase(),b=c.toLowerCase(); return a===b?0:a<b?-1:1},numeric:function(d,c){return d-c}},classes:{sort:{sortable:"footable-sortable",sorted:"footable-sorted",descending:"footable-sorted-desc",indicator:"footable-sort-indicator"}},events:{sort:{sorting:"footable_sorting",sorted:"footable_sorted"}}})})(jQuery,window);